{"ast":null,"code":"import { ADD_TO_BASKET, DECREASE_QUANTITY, GET_SHOP_CATEGORY, GET_SHOP_LIST_CATEGORY, GET_SHOP_PRODUCT_DETAIL, GET_SHOP_PRODUCT_LIST, REMOVE_PRODUCT_BASKET } from \"../type/type\";\nconst initialState = {\n  shopListCategory: [],\n  shopProductList: [],\n  shopIdCategory: [],\n  shopProductDetail: [],\n  basket: JSON.parse(localStorage.getItem(\"basket\")) || []\n};\nexport const reducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case GET_SHOP_LIST_CATEGORY:\n      return { ...state,\n        shopListCategory: action.payload\n      };\n\n    case GET_SHOP_CATEGORY:\n      return { ...state,\n        shopIdCategory: action.payload\n      };\n\n    case GET_SHOP_PRODUCT_LIST:\n      return { ...state,\n        shopProductList: action.payload\n      };\n\n    case GET_SHOP_PRODUCT_DETAIL:\n      return { ...state,\n        shopProductDetail: action.payload\n      };\n\n    case ADD_TO_BASKET:\n      const productBasket = state.basket.find(el => el.id === action.payload.id);\n\n      if (productBasket) {\n        return { ...state,\n          basket: state.basket.map(el => el.id === action.payload.id ? { ...el,\n            quantity: el.quantity + 1\n          } : el)\n        };\n      }\n\n      return { ...state,\n        basket: [...state.basket, { ...action.payload,\n          quantity: 1\n        }]\n      };\n\n    case DECREASE_QUANTITY:\n      if (state.basket[action.payload].quantity > 1) {\n        return { ...state,\n          basket: state.basket.map((el, idx) => idx === action.payload ? { ...el,\n            quantity: el.quantity - 1\n          } : el)\n        };\n      }\n\n      return;\n\n    case REMOVE_PRODUCT_BASKET:\n      return { ...state,\n        basket: state.basket.filter(el => el.id !== action.payload)\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ADD_TO_BASKET","DECREASE_QUANTITY","GET_SHOP_CATEGORY","GET_SHOP_LIST_CATEGORY","GET_SHOP_PRODUCT_DETAIL","GET_SHOP_PRODUCT_LIST","REMOVE_PRODUCT_BASKET","initialState","shopListCategory","shopProductList","shopIdCategory","shopProductDetail","basket","JSON","parse","localStorage","getItem","reducer","state","action","type","payload","productBasket","find","el","id","map","quantity","idx","filter"],"sources":["C:/Users/User/Desktop/My Portfolio/exam-2/src/redux/reducer/reducer.js"],"sourcesContent":["import {\r\n    ADD_TO_BASKET,\r\n    DECREASE_QUANTITY, GET_SHOP_CATEGORY,\r\n    GET_SHOP_LIST_CATEGORY,\r\n    GET_SHOP_PRODUCT_DETAIL,\r\n    GET_SHOP_PRODUCT_LIST, REMOVE_PRODUCT_BASKET\r\n} from \"../type/type\";\r\n\r\nconst initialState = {\r\n    shopListCategory: [],\r\n    shopProductList: [],\r\n    shopIdCategory: [],\r\n    shopProductDetail: [],\r\n    basket: JSON.parse(localStorage.getItem(\"basket\")) || [],\r\n}\r\n\r\nexport const reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_SHOP_LIST_CATEGORY:\r\n            return {...state, shopListCategory: action.payload}\r\n        case GET_SHOP_CATEGORY:\r\n            return {...state, shopIdCategory: action.payload}\r\n        case GET_SHOP_PRODUCT_LIST:\r\n            return {...state, shopProductList: action.payload}\r\n        case GET_SHOP_PRODUCT_DETAIL:\r\n            return {...state, shopProductDetail: action.payload}\r\n        case ADD_TO_BASKET:\r\n            const productBasket = state.basket.find(el => el.id === action.payload.id)\r\n\r\n            if (productBasket) {\r\n                return {\r\n                    ...state, basket: state.basket.map(el => el.id === action.payload.id ?\r\n                        {...el, quantity: el.quantity + 1} : el\r\n                    )\r\n                }\r\n            }\r\n            return {...state, basket: [...state.basket, {...action.payload, quantity: 1}]}\r\n        case DECREASE_QUANTITY:\r\n            if (state.basket[action.payload].quantity > 1){\r\n                return {\r\n                    ...state, basket: state.basket.map((el , idx) => idx === action.payload ?\r\n                        {...el, quantity: el.quantity - 1} : el\r\n                    )\r\n                }\r\n            } return\r\n        case REMOVE_PRODUCT_BASKET:\r\n            return {...state, basket: state.basket.filter(el => el.id !== action.payload )}\r\n        default :\r\n            return state\r\n    }\r\n}"],"mappings":"AAAA,SACIA,aADJ,EAEIC,iBAFJ,EAEuBC,iBAFvB,EAGIC,sBAHJ,EAIIC,uBAJJ,EAKIC,qBALJ,EAK2BC,qBAL3B,QAMO,cANP;AAQA,MAAMC,YAAY,GAAG;EACjBC,gBAAgB,EAAE,EADD;EAEjBC,eAAe,EAAE,EAFA;EAGjBC,cAAc,EAAE,EAHC;EAIjBC,iBAAiB,EAAE,EAJF;EAKjBC,MAAM,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,KAA8C;AALrC,CAArB;AAQA,OAAO,MAAMC,OAAO,GAAG,YAAkC;EAAA,IAAjCC,KAAiC,uEAAzBX,YAAyB;EAAA,IAAXY,MAAW;;EACrD,QAAQA,MAAM,CAACC,IAAf;IACI,KAAKjB,sBAAL;MACI,OAAO,EAAC,GAAGe,KAAJ;QAAWV,gBAAgB,EAAEW,MAAM,CAACE;MAApC,CAAP;;IACJ,KAAKnB,iBAAL;MACI,OAAO,EAAC,GAAGgB,KAAJ;QAAWR,cAAc,EAAES,MAAM,CAACE;MAAlC,CAAP;;IACJ,KAAKhB,qBAAL;MACI,OAAO,EAAC,GAAGa,KAAJ;QAAWT,eAAe,EAAEU,MAAM,CAACE;MAAnC,CAAP;;IACJ,KAAKjB,uBAAL;MACI,OAAO,EAAC,GAAGc,KAAJ;QAAWP,iBAAiB,EAAEQ,MAAM,CAACE;MAArC,CAAP;;IACJ,KAAKrB,aAAL;MACI,MAAMsB,aAAa,GAAGJ,KAAK,CAACN,MAAN,CAAaW,IAAb,CAAkBC,EAAE,IAAIA,EAAE,CAACC,EAAH,KAAUN,MAAM,CAACE,OAAP,CAAeI,EAAjD,CAAtB;;MAEA,IAAIH,aAAJ,EAAmB;QACf,OAAO,EACH,GAAGJ,KADA;UACON,MAAM,EAAEM,KAAK,CAACN,MAAN,CAAac,GAAb,CAAiBF,EAAE,IAAIA,EAAE,CAACC,EAAH,KAAUN,MAAM,CAACE,OAAP,CAAeI,EAAzB,GACrC,EAAC,GAAGD,EAAJ;YAAQG,QAAQ,EAAEH,EAAE,CAACG,QAAH,GAAc;UAAhC,CADqC,GACAH,EADvB;QADf,CAAP;MAKH;;MACD,OAAO,EAAC,GAAGN,KAAJ;QAAWN,MAAM,EAAE,CAAC,GAAGM,KAAK,CAACN,MAAV,EAAkB,EAAC,GAAGO,MAAM,CAACE,OAAX;UAAoBM,QAAQ,EAAE;QAA9B,CAAlB;MAAnB,CAAP;;IACJ,KAAK1B,iBAAL;MACI,IAAIiB,KAAK,CAACN,MAAN,CAAaO,MAAM,CAACE,OAApB,EAA6BM,QAA7B,GAAwC,CAA5C,EAA8C;QAC1C,OAAO,EACH,GAAGT,KADA;UACON,MAAM,EAAEM,KAAK,CAACN,MAAN,CAAac,GAAb,CAAiB,CAACF,EAAD,EAAMI,GAAN,KAAcA,GAAG,KAAKT,MAAM,CAACE,OAAf,GAC7C,EAAC,GAAGG,EAAJ;YAAQG,QAAQ,EAAEH,EAAE,CAACG,QAAH,GAAc;UAAhC,CAD6C,GACRH,EADvB;QADf,CAAP;MAKH;;MAAC;;IACN,KAAKlB,qBAAL;MACI,OAAO,EAAC,GAAGY,KAAJ;QAAWN,MAAM,EAAEM,KAAK,CAACN,MAAN,CAAaiB,MAAb,CAAoBL,EAAE,IAAIA,EAAE,CAACC,EAAH,KAAUN,MAAM,CAACE,OAA3C;MAAnB,CAAP;;IACJ;MACI,OAAOH,KAAP;EA/BR;AAiCH,CAlCM"},"metadata":{},"sourceType":"module"}